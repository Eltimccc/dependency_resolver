# dependency_resolver
Тестовое задание для собеседования в организацию

## Описание и функции
Микросервис для разрешения зависимостей между задачами и билдами.
Вводится имя билда из файла builds.yaml, затем формируется json ответ
в виде списка из тасок по введенному биллу из файла tasks.yaml.



## Технологии
- Python 3.11.1
- FastAPI 0.99.1

## Запуск проекта в dev-режиме
Эти инструкции помогут вам запустить и запустить копию проекта на вашем локальном компьютере для целей разработки и тестирования.

*Клонируем репозиторий:*
```
git clone https://github.com/Eltimccc/dependency_resolver.git
```

*Переходим в папку с проектом и устанавливаем виртуальное окружение:*

```
python3 -m venv venv
```

*Активируем виртуальное окружение:*
```
source venv/bin/activate
```

*Устанавливаем зависимости:*
```
python3 -m pip install --upgrade pip
```
```
pip install -r requirements.txt
```

*ЗАПУСК!*
```
uvicorn app.main:app --reload
```

## Использование
Для корретного использования микросервиса, в директории проекта в папке builds есть 2 файла builds.yaml и tasks.yaml.

При старте сервис загружает tasks.yaml и builds.yaml, которые содержат задачи и билды соответственно.

После запуска проекта нужно перейти по адресу http://127.0.0.1:8000/docs.

Откроется документация swagger в которой можно выполнять запросы.
По заданию у нас выполняется POST запрос на ендпоинт `/get_tasks`.

Для выполнения запроса, в swagger нужно ввести build name, то есть имя билда из файла builds.yaml.

Ответ является JSON-объектом со списком задач, отсортированных с учетом их зависимостей.

В данном микросервисе для сортировки используется рекурсивный подход для обработки зависимостей задач и правильного порядка их добавления в список.

Структура этого микросервиса рекомендуется документацией FastAPI и автором фреймворка, способствует масштабируемости и облегчает поддержку проекта.

### Пример
В файле builds.yaml есть билд:
```
builds:
- name: number_sort
  tasks:
  - five
  - ten
```
Таски с зависимостями из task.yaml:
```
tasks:
- name: ten
  dependencies:
  - six
  - seven
  - eight
  - nine
- name: five
  dependencies:
  - one
  - two
  - three
  - four
```

Выводом является JSON-объектом со списком задач, отсортированных с учетом их зависимостей. <p> 
Задачи не могут быть выполнены перед зависимостями, поэтому сначала идут зависимости, потом задача к этим зависимостям:
```
{
  "tasks": [
    "one",
    "two",
    "three",
    "four",
    "five",
    "six",
    "seven",
    "eight",
    "nine",
    "ten"
  ]
}
```

### Автор
[Денис М. (Python-разработчик)](https://github.com/Eltimccc "Денис М (Python-разработчик)")
